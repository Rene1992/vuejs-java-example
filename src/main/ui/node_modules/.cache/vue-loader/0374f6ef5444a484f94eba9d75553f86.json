{"remainingRequest":"F:\\OneDrive\\Documents\\koodit\\vuejs-java-example\\src\\main\\ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\OneDrive\\Documents\\koodit\\vuejs-java-example\\src\\main\\ui\\src\\components\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\OneDrive\\Documents\\koodit\\vuejs-java-example\\src\\main\\ui\\src\\components\\Dashboard.vue","mtime":1602544811206},{"path":"F:\\OneDrive\\Documents\\koodit\\vuejs-java-example\\src\\main\\ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\OneDrive\\Documents\\koodit\\vuejs-java-example\\src\\main\\ui\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"F:\\OneDrive\\Documents\\koodit\\vuejs-java-example\\src\\main\\ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\OneDrive\\Documents\\koodit\\vuejs-java-example\\src\\main\\ui\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgSGVhZGVyIGZyb20gJy4vSGVhZGVyLnZ1ZScNCmltcG9ydCBDcmVhdGVDdXN0b21lciBmcm9tICcuL0NyZWF0ZUN1c3RvbWVyLnZ1ZScNCmltcG9ydCBEaXNwbGF5Qm9hcmQgZnJvbSAnLi9EaXNwbGF5Qm9hcmQudnVlJw0KaW1wb3J0IEN1c3RvbWVycyBmcm9tICcuL0N1c3RvbWVycy52dWUnDQpjb25zdCBjbG9uZWRlZXAgPSByZXF1aXJlKCdsb2Rhc2guY2xvbmVkZWVwJykNCmltcG9ydCBDU1ZCdXR0b24gZnJvbSAnLi9DU1ZCdXR0b24udnVlJw0KaW1wb3J0IHsgZ2V0QWxsQ3VzdG9tZXJzLCBnZXRBbGxDb21wYW5pZXMsIGNyZWF0ZUN1c3RvbWVyLCANCiAgZGVsZXRlQ3VzdG9tZXIsIHNhdmVBbGxDdXN0b21lcnMgfSBmcm9tICcuLi9zZXJ2aWNlcy9DdXN0b21lclNlcnZpY2UnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAnRGFzaGJvYXJkJywNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgIEhlYWRlciwNCiAgICAgICAgQ3JlYXRlQ3VzdG9tZXIsDQogICAgICAgIERpc3BsYXlCb2FyZCwNCiAgICAgICAgQ3VzdG9tZXJzLA0KICAgICAgICBDU1ZCdXR0b24NCiAgICB9LA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBjdXN0b21lcnM6IFtdLA0KICAgICAgICAgICAgY29tcGFuaWVzOiBbXSwNCiAgICAgICAgICAgIGNvbXBhbmllc0hlbHBlcjogW10sDQogICAgICAgICAgICBudW1iZXJPZkN1c3RvbWVyczogMA0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGdldEFsbEN1c3RvbWVycygpIHsNCiAgICAgICAgICAgIGdldEFsbEN1c3RvbWVycygpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9tZXJzID0gcmVzcG9uc2UubWFwKGN1c3RvbWVyID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY3VzdG9tZXIuY29tcGFuaWVzID0gY3VzdG9tZXIuY29tcGFuaWVzLnNwbGl0KCIsIik7DQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjdXN0b21lcjsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHRoaXMubnVtYmVyT2ZDdXN0b21lcnMgPSB0aGlzLmN1c3RvbWVycy5sZW5ndGgNCiAgICAgICAgICAgIH0pDQogICAgICAgIH0sDQogICAgICAgIGdldEFsbENvbXBhbmllcygpIHsNCiAgICAgICAgICAgIGdldEFsbENvbXBhbmllcygpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQ0KICAgICAgICAgICAgICAgIHRoaXMuY29tcGFuaWVzID0gcmVzcG9uc2UNCiAgICAgICAgICAgICAgICB0aGlzLmNvbXBhbmllcy5tYXAoY29tcGFueSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcGFuaWVzSGVscGVyW2NvbXBhbnkuaWRdID0gY29tcGFueTsNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgY3VzdG9tZXJDcmVhdGUoZGF0YSkgew0KICAgICAgICAgICAgbGV0IGN1c3RvbWVySWRzID0gW107DQogICAgICAgICAgICBsZXQgY3VzdG9tZXJJZFRha2VuID0gZmFsc2U7DQogICAgICAgICAgICBkYXRhLmlkID0gdGhpcy5udW1iZXJPZkN1c3RvbWVycyArMTsgICAgDQogICAgICAgICAgICB0aGlzLmN1c3RvbWVycy5tYXAoY3VzdG9tZXIgPT4gew0KICAgICAgICAgICAgICAgIGN1c3RvbWVySWRzLnB1c2goY3VzdG9tZXIuaWQpOw0KICAgICAgICAgICAgICAgIGlmKCFjdXN0b21lcklkVGFrZW4pIHtpZihjdXN0b21lci5pZCA9PSBkYXRhLmlkKSBjdXN0b21lcklkVGFrZW4gPSB0cnVlO30gIA0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBjdXN0b21lcklkcyA9IGN1c3RvbWVySWRzLnNvcnQoKTsNCiAgICAgICAgICAgIGlmKGN1c3RvbWVySWRUYWtlbikgZGF0YS5pZCA9IGN1c3RvbWVySWRzW2N1c3RvbWVySWRzLmxlbmd0aC0xXSArMTsNCiAgICAgICAgICAgIGRhdGEuY29tcGFuaWVzID0gZGF0YS5jb21wYW5pZXMudG9TdHJpbmcoKTsNCiAgICAgICAgICAgIGNyZWF0ZUN1c3RvbWVyKGRhdGEpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICB0aGlzLmdldEFsbEN1c3RvbWVycygpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIGN1c3RvbWVyRGVsZXRlKHVzZXIpIHsNCiAgICAgICAgICAgIHVzZXIuY29tcGFuaWVzID0gdXNlci5jb21wYW5pZXMudG9TdHJpbmcoKTsNCiAgICAgICAgICAgIGRlbGV0ZUN1c3RvbWVyKHVzZXIpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICB0aGlzLmdldEFsbEN1c3RvbWVycygpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIHNhdmVBbGxDdXN0b21lcnMoY3VzdG9tZXJzKSB7DQogICAgICAgICAgICBjdXN0b21lcnMubWFwKHVzZXIgPT4gew0KICAgICAgICAgICAgICAgIHVzZXIuY29tcGFuaWVzID0gdXNlci5jb21wYW5pZXMudG9TdHJpbmcoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcjsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgc2F2ZUFsbEN1c3RvbWVycyhjdXN0b21lcnMpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsNCiAgICAgICAgICAgICAgICB0aGlzLmdldEFsbEN1c3RvbWVycygpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIGV4cG9ydENTVigpIHsNCiAgICAgICAgICAgIGxldCBjc3ZDb250ZW50ID0gImRhdGE6dGV4dC9jc3Y7Y2hhcnNldD11dGYtOCwiOw0KICAgICAgICAgICAgbGV0IGV4cG9ydFVzZXJzID0gY2xvbmVkZWVwKHRoaXMuY3VzdG9tZXJzKTsNCiAgICAgICAgICAgIGV4cG9ydFVzZXJzID0gZXhwb3J0VXNlcnMubWFwKHVzZXIgPT4gew0KICAgICAgICAgICAgICAgIHVzZXIuY29tcGFuaWVzLm1hcCgoY29tcGFueSwgaW5kZXgpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgdXNlci5jb21wYW5pZXNbaW5kZXhdID0gdGhpcy5jb21wYW5pZXNIZWxwZXJbY29tcGFueV0ubmFtZTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBhbnkNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIHJldHVybiB1c2VyOw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIGNzdkNvbnRlbnQgKz0gWw0KICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGV4cG9ydFVzZXJzWzBdKS5qb2luKCI7IiksDQogICAgICAgICAgICAgICAgLi4uZXhwb3J0VXNlcnMubWFwKGl0ZW0gPT4gT2JqZWN0LnZhbHVlcyhpdGVtKS5qb2luKCI7IikpDQogICAgICAgICAgICBdDQogICAgICAgICAgICAgICAgLmpvaW4oIlxuIikNCiAgICAgICAgICAgICAgICAucmVwbGFjZSgvKF5cWyl8KFxdJCkvZ20sICIiKTsNCiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBlbmNvZGVVUkkoY3N2Q29udGVudCk7DQogICAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOw0KICAgICAgICAgICAgY29uc29sZS5sb2coImRhdGEiLCBkYXRhKTsNCiAgICAgICAgICAgIGxpbmsuc2V0QXR0cmlidXRlKCJocmVmIiwgZGF0YSk7DQogICAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCAiY3VzdG9tZXJzLmNzdiIpOw0KICAgICAgICAgICAgbGluay5jbGljaygpOw0KICAgICAgICB9DQogICAgfSwNCiAgICBtb3VudGVkICgpIHsNCiAgICAgICAgdGhpcy5nZXRBbGxDb21wYW5pZXMoKTsNCiAgICAgICAgdGhpcy5nZXRBbGxDdXN0b21lcnMoKTsNCiAgICB9DQp9DQo="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div class=\"hello\">\r\n    <Header />\r\n    <div class=\"container mrgnbtm\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-8\">\r\n          <CreateCustomer @createCustomer=\"customerCreate($event)\" :companies=\"companies\" />\r\n        </div>\r\n        <div class=\"col-md-4\">\r\n          <DisplayBoard :numberOfCustomers=\"numberOfCustomers\" @getAllCustomers=\"getAllCustomers()\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row mrgnbtm\">\r\n      <Customers v-if=\"customers.length > 0\" @deleteCustomer=\"customerDelete($event)\" :customers=\"customers\" :companies=\"companies\"/>\r\n    </div>\r\n    <div class=\"row mrgnbtm\">\r\n      <div class=\"container mrgnbtm\">\r\n        <button style=\"margin-right:15px\" @click=\"saveAllCustomers(customers)\" type=\"button\" class=\"btn btn-info\">Save all customers</button>\r\n        <CSVButton @exportCSV=\"exportCSV()\"/>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Header from './Header.vue'\r\nimport CreateCustomer from './CreateCustomer.vue'\r\nimport DisplayBoard from './DisplayBoard.vue'\r\nimport Customers from './Customers.vue'\r\nconst clonedeep = require('lodash.clonedeep')\r\nimport CSVButton from './CSVButton.vue'\r\nimport { getAllCustomers, getAllCompanies, createCustomer, \r\n  deleteCustomer, saveAllCustomers } from '../services/CustomerService'\r\n\r\nexport default {\r\n    name: 'Dashboard',\r\n    components: {\r\n        Header,\r\n        CreateCustomer,\r\n        DisplayBoard,\r\n        Customers,\r\n        CSVButton\r\n    },\r\n    data() {\r\n        return {\r\n            customers: [],\r\n            companies: [],\r\n            companiesHelper: [],\r\n            numberOfCustomers: 0\r\n        }\r\n    },\r\n    methods: {\r\n        getAllCustomers() {\r\n            getAllCustomers().then(response => {\r\n                console.log(response)\r\n                this.customers = response.map(customer => {\r\n                    customer.companies = customer.companies.split(\",\");\r\n                    return customer;\r\n                })\r\n                this.numberOfCustomers = this.customers.length\r\n            })\r\n        },\r\n        getAllCompanies() {\r\n            getAllCompanies().then(response => {\r\n                console.log(response)\r\n                this.companies = response\r\n                this.companies.map(company => {\r\n                    this.companiesHelper[company.id] = company;\r\n                })\r\n            })\r\n        },\r\n        customerCreate(data) {\r\n            let customerIds = [];\r\n            let customerIdTaken = false;\r\n            data.id = this.numberOfCustomers +1;    \r\n            this.customers.map(customer => {\r\n                customerIds.push(customer.id);\r\n                if(!customerIdTaken) {if(customer.id == data.id) customerIdTaken = true;}  \r\n            });\r\n            customerIds = customerIds.sort();\r\n            if(customerIdTaken) data.id = customerIds[customerIds.length-1] +1;\r\n            data.companies = data.companies.toString();\r\n            createCustomer(data).then(response => {\r\n                console.log(response);\r\n                this.getAllCustomers();\r\n            });\r\n        },\r\n        customerDelete(user) {\r\n            user.companies = user.companies.toString();\r\n            deleteCustomer(user).then(response => {\r\n                console.log(response);\r\n                this.getAllCustomers();\r\n            });\r\n        },\r\n        saveAllCustomers(customers) {\r\n            customers.map(user => {\r\n                user.companies = user.companies.toString();\r\n                return user;\r\n            });\r\n            saveAllCustomers(customers).then(response => {\r\n                console.log(response);\r\n                this.getAllCustomers();\r\n            });\r\n        },\r\n        exportCSV() {\r\n            let csvContent = \"data:text/csv;charset=utf-8,\";\r\n            let exportUsers = clonedeep(this.customers);\r\n            exportUsers = exportUsers.map(user => {\r\n                user.companies.map((company, index) => {\r\n                    user.companies[index] = this.companiesHelper[company].name;\r\n                    return company\r\n                })\r\n                return user;\r\n            })\r\n            csvContent += [\r\n                Object.keys(exportUsers[0]).join(\";\"),\r\n                ...exportUsers.map(item => Object.values(item).join(\";\"))\r\n            ]\r\n                .join(\"\\n\")\r\n                .replace(/(^\\[)|(\\]$)/gm, \"\");\r\n            const data = encodeURI(csvContent);\r\n            const link = document.createElement(\"a\");\r\n            console.log(\"data\", data);\r\n            link.setAttribute(\"href\", data);\r\n            link.setAttribute(\"download\", \"customers.csv\");\r\n            link.click();\r\n        }\r\n    },\r\n    mounted () {\r\n        this.getAllCompanies();\r\n        this.getAllCustomers();\r\n    }\r\n}\r\n</script>"]}]}